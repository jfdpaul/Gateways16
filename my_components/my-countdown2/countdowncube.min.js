;(function(e,t,n,r){function s(t,n){var r=e.extend({},e.fn.countdownCube.defaults,n);i.init(t,r);t.data("countdownCube",r)}var i={has3d:function(){var e=n.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};n.body.insertBefore(e,null);for(var s in i){if(e.style[s]!==r){e.style[s]="translate3d(1px,1px,1px)";has3d=t.getComputedStyle(e).getPropertyValue(i[s])}}n.body.removeChild(e);return has3d!==r&&has3d.length>0&&has3d!=="none"},init:function(t,n){t.find("*").remove();if(typeof t.data("countdownCubeId")!="undefined"){clearInterval(t.data("countdownCubeId"));t.removeData("countdownCubeId")}if(typeof e("body").data("countdownCubeCounter")=="undefined")e("body").data("countdownCubeCounter",0);else e("body").data("countdownCubeCounter",e("body").data("countdownCubeCounter")+1);this.elementClass="countdownCube_ID_"+e("body").data("countdownCubeCounter");t.addClass(this.elementClass);this.classes=["front","back","right","left","top","bottom"];this.topTags=["year","month","day","hour","minute","second"];this.loadingTags=["LO","AD","IN","G.","..","..."];this.transformNames=["-webkit-transform","-moz-transform","-o-transform","transform"];cubes=[];for(var r in this.topTags){var i=this.topTags[r];cube=t.append("<section></section>").children(":last").attr("id",i).addClass("countdownCubeContainer").append("<div></div>").children(":last").addClass("countdownCubeCube").data("side","show-front");this.addFigures(cube,this.classes,this.loadingTags[r]);t.children(":last").append("<div></div>").children(":last").html(i).addClass("countdownCubeTitleDiv")}this.setupAllCss(t,n);var s=this;setTimeout(function(){s.setTimeLeft(t,n)},10);var o=setInterval(function(){s.setTimeLeft(t,n)},1e3);t.data("countdownCubeId",o);if(!this.has3d()){t.append("<p>Your Browser/Computer Sucks - It doesnt support 3d Transforms!</p>")}},setupAllCss:function(t,n){t.css({diaplay:"inline-block",height:n.cubeSize*1.5+"px"});var r=n.cubeSize*5+"px";var i=n.cubeSize+"px";var s=n.cubeSize-4+"px";var o=Math.round(n.cubeSize/5*3)+"px";var u=Math.round(n.cubeSize/10*3)+"px";var a=Math.round(n.cubeSize/2)+"px";e("."+this.elementClass+" .countdownCubeContainer").css({height:i,width:i,"-webkit-perspective":r,"-moz-perspective":r,"-o-perspective":r,perspective:r});t.find(".countdownCubeTitleDiv").css({"margin-top":i,"text-align":"center","font-size":u});t.find("figure").css({margin:0,height:s,width:s,"line-height":s,"font-size":o,background:n.background,color:n.color});this.addTransforms(t,".countdownCubeCube .front","translateZ( "+a+" )");this.addTransforms(t,".countdownCubeCube .back","rotateX( -180deg ) translateZ( "+a+" )");this.addTransforms(t,".countdownCubeCube .right","rotateY(   90deg ) translateZ( "+a+" )");this.addTransforms(t,".countdownCubeCube .left","rotateY(  -90deg ) translateZ( "+a+" )");this.addTransforms(t,".countdownCubeCube .top","rotateX(   90deg ) translateZ( "+a+" )");this.addTransforms(t,".countdownCubeCube .bottom","rotateX(  -90deg ) translateZ( "+a+" )");var f="";f+=this.createStyleSheet(t,"."+this.elementClass+" .countdownCubeCube.show-front","translateZ( -"+a+" )");f+=this.createStyleSheet(t,"."+this.elementClass+" .countdownCubeCube.show-back","translateZ( -"+a+" ) rotateX( -180deg )");f+=this.createStyleSheet(t,"."+this.elementClass+" .countdownCubeCube.show-right","translateZ( -"+a+" ) rotateY(  -90deg )");f+=this.createStyleSheet(t,"."+this.elementClass+" .countdownCubeCube.show-left","translateZ( -"+a+" ) rotateY(   90deg )");f+=this.createStyleSheet(t,"."+this.elementClass+" .countdownCubeCube.show-top","translateZ( -"+a+" ) rotateX(  -90deg )");f+=this.createStyleSheet(t,"."+this.elementClass+" .countdownCubeCube.show-bottom","translateZ( -"+a+" ) rotateX(   90deg )");this.addStyleSheet(f)},createStyleSheet:function(e,t,n){var r="{";for(var i in this.transformNames)r+=this.transformNames[i]+": "+n+";";r+="}";return t+r},addStyleSheet:function(t){var r=n.createElement("style");r.type="text/css";r.innerHTML=t;e(r).appendTo("head")},addTransforms:function(e,t,n){var r={};for(var i in this.transformNames)r[this.transformNames[i]]=n;e.find(t).css(r)},addFigures:function(e,t,n){var r;for(r=0;r<6;r++){e.append("<figure></figure>").children(":last").addClass(t[r]).html(n)}return this},shiftCube:function(e,t,n,r){var i=this.classes;var s=n.data("number");if(r!=s){var o=n.data("side");var u=o.replace("show-","");var a=i.slice(0);var f=Math.floor(Math.random()*5);var l=a.indexOf(u);a.splice(l,1);var c=a[f];var h="show-"+c;n.find("figure").not("."+u).html(r);n.removeClass(o).addClass(h);n.data("side",h);n.data("number",r)}},setTimeLeft:function(e,t){var n=e.find("#second .countdownCubeCube");var r=e.find("#minute .countdownCubeCube");var i=e.find("#hour .countdownCubeCube");var s=e.find("#day .countdownCubeCube");var o=e.find("#month .countdownCubeCube");var u=e.find("#year .countdownCubeCube");var a=new Date;var f=(t.target-a)/1e3;if(f<0){clearInterval(e.data("countdownCube").refreshId);return}var l,c,h,p,d;var v=t.target.getFullYear()-a.getFullYear();var m=t.target.getMonth()-a.getMonth();var g=t.target.getDate()-a.getDate();var y=t.target.getHours()-a.getHours();var b=t.target.getMinutes()-a.getMinutes();var w=t.target.getSeconds()-a.getSeconds();var E;E=new Date(a.getTime());E.setFullYear(E.getFullYear()+v);if(E>t.target){yearsToShow=v-1;c=m+12}else{yearsToShow=v;c=m}if(g<0||g==0&&y<0||g==0&&y==0&&b<0||g==0&&y==0&&b==0&&w<=0){var E=new Date(a.getTime());E.setDate(1);E.setMonth(a.getMonth()+1);var S=Math.round((E-a)/1e3/3600/24)-1;l=t.target.getDate()+S;c--}else if(g==0){l=0}else{l=g}if(y<0||y==0&&b<0||y==0&&b==0&&w<=0){l--}h=(y+24)%24;diffTime=new Date(f*1e3);d=diffTime.getSeconds();p=diffTime.getMinutes();h=diffTime.getHours();this.shiftCube(e,t,n,d);this.shiftCube(e,t,r,p);this.shiftCube(e,t,i,h);this.shiftCube(e,t,s,l);this.shiftCube(e,t,o,c);this.shiftCube(e,t,u,yearsToShow)}};e.fn["countdownCube"]=function(t){return this.each(function(){s(e(this),t)})};e.fn.countdownCube.defaults={cubeSize:50,background:"rgba( 255, 150, 150, 0.8 )",color:"white"}})(jQuery,window,document)